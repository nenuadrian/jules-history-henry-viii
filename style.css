/* === Original Body and General Styles (Keep As Is) === */
/* body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    line-height: 1.6;
    margin: 20px;
    background-color: #f4f4f4;
    color: #333;
} */

/* h1 {
    text-align: center;
    color: #502900;
} */

h2 {
    /* color: #7a3d00; */ /* Let theme handle color */
    border-bottom: 1px solid #ddd;
    padding-bottom: 5px;
}

article {
    background-color: #fff; /* Keep for wife articles if theme doesn't provide card-like bg */
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 8px; 
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* p {
    margin-bottom: 10px;
} */

img {
    max-width: 200px;
    height: auto;
    display: block;
    margin-top: 10px;
    margin-bottom: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-left: auto;
    margin-right: auto;
}

/* === Enhanced Quiz Container Styling === */
#quiz-container {
    /* background-image: linear-gradient(to bottom right, #fdfdfd, #f0f0f0); */ /* Remove to use theme's bg */
    /* border: 1px solid #d8d8d8; */ /* Remove to use theme's panel/card styling if any */
    border-radius: 12px; 
    padding: 25px; 
    margin-top: 25px;
    margin-bottom: 35px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1); /* Keep shadow for depth */
    background-color: #fff; /* Add a default white background if theme's body bg is too dark */
}

#quiz-question {
    font-size: 1.4em; 
    /* color: #333; */ /* Let theme handle color */
    margin-bottom: 20px;
    font-weight: 600; 
}

#quiz-options {
    display: flex;
    flex-direction: column;
    gap: 10px; /* Reduced gap as w-100 buttons have mb-2 */
    margin-bottom: 20px;
}

/* === Enhanced Button Styling (General) === */
.quiz-option-btn, #next-question-btn {
    /* border: none; Provided by .btn */
    /* padding: 12px 18px; Provided by .btn */
    /* font-size: 1em; Provided by .btn */
    /* border-radius: 6px; Provided by .btn */
    /* cursor: pointer; Provided by .btn */
    transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease, opacity 300ms ease-in-out; 
    font-weight: 500; 
    /* text-align: center; Provided by .btn or .w-100 text helpers if needed */
}

.quiz-option-btn:focus, #next-question-btn:focus {
    outline: 2px solid #80adda; /* Keep custom focus if theme's is not distinct enough */
    outline-offset: 2px;
    box-shadow: 0 0 0 3px rgba(128, 173, 218, 0.5); 
}

/* === Enhanced Quiz Option Buttons === */
.quiz-option-btn { /* Works with .btn .btn-outline-primary .w-100 .mb-2 */
    background-color: #5D3A1A !important; /* Custom color over theme's outline */
    color: white !important;
    border-color: #5D3A1A !important; /* Match border to background for solid look */
}

.quiz-option-btn:hover:not(:disabled) {
    background-color: #7a5029 !important;
    border-color: #7a5029 !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

/* Bootstrap's .btn-outline-primary:disabled handles this well enough with the theme.
   If more specific styling is needed, uncomment and adjust.
.quiz-option-btn:disabled { 
    background-color: #E0E0E0 !important; 
    color: #888888 !important;
    cursor: not-allowed;
    box-shadow: none;
    transform: none;
} */

/* === Enhanced Feedback Message === */
#quiz-feedback {
    font-size: 1.1em;
    font-weight: bold;
    margin-bottom: 20px;
    min-height: 1.5em; 
    padding: 5px; 
    border-radius: 4px; 
}

/* === Enhanced Next Question Button === */
/* #next-question-btn is now .btn .btn-success .mt-3 */
/* Theme's .btn-success will apply. Add overrides if theme's look is not desired. */
#next-question-btn:hover { /* Keep custom hover effects if desired over theme's .btn-success:hover */
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(40,167,69,0.25); /* Example, may need color from theme's success */
}

/* === Wife Article Styling (Keep As Is or Minor Adjust) === */
.wife-article {
    display: none; 
    opacity: 0; /* Start transparent for fade-in effect */
}
.wife-article.visible { /* JS will add .visible and .fade-in simultaneously after setting display:block */
    display: block; /* Ensure it's in layout flow */
}


/* Genealogy Graph Styling */
#genealogy-graph-container {
    margin-top: 20px;
    border: 2px solid var(--bs-primary); /* Use theme's primary color */
    border-radius: 8px;
    padding: 10px;
    background-color: #fff; 
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

#genealogy-graph {
    width: 100%;
    height: 500px; 
    display: block;
    background-color: #fefefa; 
}

/* Styling for the completion message header, if needed */
#quiz-container h2 { 
    margin-bottom: 15px;
    /* color: #502900; */ /* Let theme handle color */
}

/* D3 Graph Specific Styles */

/* Style for the main SVG container (already has ID #genealogy-graph) */
#genealogy-graph svg {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Consistent font */
    border: 1px solid #eee; /* A light border for the SVG itself if needed */
}

/* Link/Edge Styling */
.links line { /* Targeting lines created by D3 */
    stroke-opacity: 0.7;
    transition: stroke-opacity 0.2s ease-in-out, stroke 0.2s ease-in-out;
}

.links line:hover {
    stroke-opacity: 1;
    stroke: #555; /* Darken on hover */
}

/* Node Group Styling (the <g> element for circle + text) */
.nodes g {
    cursor: pointer;
}

/* Node Circle Styling */
.nodes circle {
    stroke: #fff; /* White border around circles */
    stroke-width: 1.5px;
    transition: transform 0.2s ease-in-out, filter 0.2s ease-in-out;
}

.nodes g:hover circle { /* Hover effect on the group, applied to circle */
    transform: scale(1.1);
    /* filter: drop-shadow(0px 0px 3px rgba(0,0,0,0.3)); // A subtle shadow */
}

/* Node Label Styling */
.nodes text {
    font-size: 10px;
    fill: #333;
    paint-order: stroke; /* Draw stroke underneath fill for text */
    stroke: #fff; /* White outline for text readability */
    stroke-width: 2px;
    stroke-linecap: butt;
    stroke-linejoin: miter;
    pointer-events: none; /* Text should not capture mouse events from circle */
    text-anchor: middle; /* Ensure it's middle aligned if not set by attr */
}

/* Specific type styling (colors are set by attributes, but other things can be here) */
.nodes g[data-type="king"] text { /* Example if we were to add data-type to node group */
    font-weight: bold;
}
.nodes g[data-type="queen"] text {
    /* font-style: italic; */
}

/* Quiz Animation Styles */
.fade-in {
    opacity: 1 !important; /* Target opacity */
    transition: opacity 300ms ease-in-out;
}

.fade-out {
    opacity: 0 !important; /* Target opacity */
    transition: opacity 300ms ease-in-out;
}

/* This class can be used to ensure an element is part of the layout flow 
   but initially invisible before fade-in, if display:none was used previously.
   displayQuiz now handles setting opacity to 0 and display to block before fade-in.
*/
.visible {
    /* display: block;  JS sets display:block on wife articles directly */
    /* Or other appropriate display value like 'flex' if needed */
}

/* Ensure elements that will be faded start with opacity 0 if they aren't immediately faded in */
/* The JS now handles setting initial opacity to 0 before adding .fade-in, so this might be redundant
   but can serve as a fallback if an element is added to DOM and should be hidden before JS acts.
#quiz-question,
#quiz-options,
.wife-article:not(.visible) { /* If not yet marked visible by JS */
    /* opacity: 0; /* Default to hidden if JS hasn't set them up for fade-in yet */
/* }
*/

/* Ensure the quiz container itself doesn't have conflicting transitions if not intended */
#quiz-container {
    /* Add if needed: transition: none; */
}

/* Ensure next question button also fades if desired, though JS manages display:none primarily */
#next-question-btn.fade-in { /* This class is added by JS in handleAnswer */
    opacity: 1 !important; 
    /* display: block !important; /* JS already sets display:block for it */
    /* transition: opacity 300ms ease-in-out; /* Already on #next-question-btn general rule */
}
