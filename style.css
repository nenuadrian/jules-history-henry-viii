:root {
    --bs-primary-rgb: 44, 62, 80; /* Deep Desaturated Blue */
    --bs-primary: rgb(var(--bs-primary-rgb));
    --bs-secondary-rgb: 176, 141, 87; /* Muted Gold/Brass */
    --bs-secondary: rgb(var(--bs-secondary-rgb));

    --color-dark-primary: #2c3e50;
    --color-accent-gold: #b08d57;
    --color-light-bg: #f8f9fa;
    --color-text-standard: #34495e;
    --color-white: #ffffff;
    --color-light-grey-border: #e0e0e0;
    --color-light-green-bg: #e6f7e9; /* For success list items */
    --color-light-red-bg: #f8d7da;   /* For danger list items */


    --font-primary: 'Montserrat', sans-serif;
    --font-accent-serif: 'Playfair Display', serif;

    --default-shadow: 0 5px 15px rgba(44, 62, 80, 0.1);
    --stronger-shadow: 0 8px 25px rgba(44, 62, 80, 0.15);
}

body {
    font-family: var(--font-primary);
    /* background-color: var(--color-light-bg); */ /* Overridden by gradient */
    color: var(--color-text-standard);
    line-height: 1.7;
    background-image: linear-gradient(to bottom, #e9ecef, #dee2e6); /* Light grey subtle gradient */
    background-attachment: fixed;
    background-size: cover;
    background-position: center;
    margin: 0; /* Ensure no default body margin interferes */
}

/* Sharp corners for common Bootstrap components */
.btn, .card, .form-control, .navbar, .list-group-item, .alert,
#quiz-container, #genealogy-graph-container,
article
{
    border-radius: 0 !important;
}

/* Apply default shadow and border to card-like elements */
.card, #quiz-container, #genealogy-graph-container, article {
    box-shadow: var(--default-shadow);
    border: 1px solid var(--color-light-grey-border);
}

/* Ensure Bootstrap uses our primary/secondary for its components */
.text-primary { color: var(--bs-primary) !important; }
.bg-primary { background-color: var(--bs-primary) !important; }
.border-primary { border-color: var(--bs-primary) !important; }

.text-secondary { color: var(--bs-secondary) !important; }
.bg-secondary { background-color: var(--bs-secondary) !important; }
.border-secondary { border-color: var(--bs-secondary) !important; }

a {
    color: var(--bs-primary);
    text-decoration: none;
}
a:hover {
    color: var(--color-accent-gold);
    text-decoration: underline;
}

/* === Global Element Styling === */
h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-primary);
    color: var(--color-dark-primary);
    margin-bottom: 0.75rem;
}

h1 {
    font-family: var(--font-accent-serif);
    font-weight: 700;
}

h2, h3, h4, h5, h6 {
    font-weight: 600;
}

/* Default .btn styling */
.btn {
    /* border: 1px solid var(--color-dark-primary); -- overridden by specific btn types */
    padding: 0.5rem 1rem;
    transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, opacity 300ms ease-in-out;
}

/* .btn-primary styling (general purpose, not quiz options) */
.btn-primary {
    background-color: var(--bs-primary);
    color: var(--color-white);
    border-color: var(--bs-primary);
    padding: 0.6rem 1.2rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 600;
    box-shadow: var(--default-shadow);
}

.btn-primary:hover {
    background-color: #1f2c3a;
    border-color: #1f2c3a;
    transform: translateY(-2px);
    box-shadow: var(--stronger-shadow);
}

/* .btn-success styling (used by Next Question Button) */
.btn-success {
    background-color: var(--color-accent-gold) !important;
    color: var(--color-white) !important;
    border-color: var(--color-accent-gold) !important;
    padding: 0.6rem 1.2rem; /* Consistent padding */
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 600;
    box-shadow: var(--default-shadow);
}

.btn-success:hover {
    background-color: #93703c !important;
    border-color: #93703c !important;
    transform: translateY(-2px);
    box-shadow: var(--stronger-shadow);
}


/* Navbar styling */
.navbar {
    background-color: var(--color-white) !important;
    box-shadow: var(--default-shadow);
    padding: 0.75rem 1.5rem;
}

.navbar-brand {
    font-family: var(--font-accent-serif);
    color: var(--color-dark-primary) !important;
    font-size: 1.5rem;
    font-weight: 700;
}

.navbar .nav-link {
    color: var(--color-text-standard) !important;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 0.5rem 1rem !important;
    border-bottom: 2px solid transparent;
}

.navbar .nav-link:hover,
.navbar .nav-link.active {
    color: var(--color-accent-gold) !important;
    border-bottom: 2px solid var(--color-accent-gold);
}

h2 {
    border-bottom: 1px solid var(--color-light-grey-border);
    padding-bottom: 5px;
}

article {
    background-color: var(--color-white);
    padding: 15px;
    margin-bottom: 20px;
}

img {
    max-width: 200px;
    height: auto;
    display: block;
    margin-top: 10px;
    margin-bottom: 10px;
    border: 1px solid var(--color-light-grey-border);
    margin-left: auto;
    margin-right: auto;
}

/* === Quiz Container Styling === */
#quiz-container {
    padding: 25px;
    margin-top: 25px;
    margin-bottom: 35px;
    background-color: var(--color-white);
}

#quiz-question {
    font-size: 1.4em;
    margin-bottom: 20px;
    font-weight: 600;
}

#quiz-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 20px;
}

/* === Quiz Option Buttons (Specific) === */
/* JS adds .btn .btn-outline-primary .quiz-option-btn .w-100 .mb-2 */
.quiz-option-btn {
    background-color: var(--bs-primary) !important;
    color: var(--color-white) !important;
    border-color: var(--bs-primary) !important;
    font-weight: 500; /* From previous general rule */
    text-transform: none; /* Override any potential uppercase from .btn-primary if it was used as base */
    letter-spacing: normal;
    box-shadow: none; /* Flatter look for options */
}

.quiz-option-btn:hover:not(:disabled) {
    background-color: #1f2c3a !important; /* Darker shade of --bs-primary */
    border-color: #1f2c3a !important;
    transform: translateY(-2px);
    box-shadow: var(--default-shadow); /* Add shadow on hover */
}
/* Disabled state: Bootstrap's .btn-outline-primary:disabled should be sufficient with theme. */


#quiz-feedback {
    font-size: 1.1em;
    font-weight: bold;
    margin-bottom: 20px;
    min-height: 1.5em;
    padding: 5px;
}

#next-question-btn { /* Has .btn .btn-success .mt-3 from HTML */
    font-weight: 600; /* Ensure consistency if not covered by .btn-success override */
}
#next-question-btn:hover {
    /* transform and shadow already defined in .btn-success:hover */
}

.wife-article {
    display: none;
    opacity: 0;
}
.wife-article.visible {
    display: block;
}

/* === Genealogy Graph Styling === */
#genealogy-graph-container {
    margin-top: 20px;
    padding: 10px;
    background-color: var(--color-white);
}

#genealogy-graph {
    width: 100%;
    height: 500px;
    display: block;
    background-color: var(--color-light-bg);
}

#quiz-container h2 {
    margin-bottom: 15px;
}

/* D3 Graph Specific Styles */
#genealogy-graph svg {
    font-family: var(--font-primary);
}

.links line {
    stroke-opacity: 0.7;
    transition: stroke-opacity 0.2s ease-in-out, stroke 0.2s ease-in-out;
}

.links line:hover {
    stroke-opacity: 1;
    stroke: var(--color-text-standard);
}

.nodes g {
    cursor: pointer;
}

.nodes circle {
    stroke: var(--color-white);
    stroke-width: 1.5px;
    transition: transform 0.2s ease-in-out, filter 0.2s ease-in-out;
}

.nodes g:hover circle {
    transform: scale(1.1);
}

.nodes text {
    font-size: 10px;
    fill: var(--color-text-standard);
    paint-order: stroke;
    stroke: var(--color-white);
    stroke-width: 2px;
    stroke-linecap: butt;
    stroke-linejoin: miter;
    pointer-events: none;
    text-anchor: middle;
}

.nodes g[data-type="king"] text {
    font-weight: bold;
}
.nodes g[data-type="queen"] text { }

/* Quiz Animation Styles */
.fade-in {
    opacity: 1 !important;
    transition: opacity 300ms ease-in-out;
}

.fade-out {
    opacity: 0 !important;
    transition: opacity 300ms ease-in-out;
}

.visible { }

#quiz-container { }

#next-question-btn.fade-in {
    opacity: 1 !important;
}

/* Quiz Summary Section Styling */
#quiz-summary-container {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid var(--color-light-grey-border);
}

#quiz-summary-container h3 {
    color: var(--bs-primary);
}

#all-wives-recap .card { } /* Default card styling from global rule applies */

#all-wives-recap .card-title { /* Name of the wife */
    font-family: var(--font-accent-serif);
    color: var(--color-dark-primary);
    font-size: 1.25rem;
}

#quiz-summary-container .list-group-item {
    background-color: var(--color-white);
    border: 1px solid var(--color-light-grey-border);
    margin-bottom: -1px; /* Overlap borders like default Bootstrap */
}
#quiz-summary-container .list-group-item p {
    margin-bottom: 0.5rem;
}

#quiz-summary-container .list-group-item strong { }

#quiz-summary-container .list-group-item .fw-bold { }

#quiz-summary-container .list-group-item-success {
    background-color: var(--color-light-green-bg) !important;
    color: var(--bs-success-text-emphasis); /* Bootstrap 5 variable */
    border-color: var(--bs-success-border-subtle); /* Bootstrap 5 variable */
}
#quiz-summary-container .list-group-item-danger {
    background-color: var(--color-light-red-bg) !important;
    color: var(--bs-danger-text-emphasis); /* Bootstrap 5 variable */
    border-color: var(--bs-danger-border-subtle); /* Bootstrap 5 variable */
}
